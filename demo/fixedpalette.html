<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>RgbQuant.js fixed palette example</title>

	<script src="../src/rgbquant.js"></script>

	<script>
		var rgb3level = [
			[0,0,0],
			[128,128,128],
			[255,255,255],
			[128,0,0],
			[255,0,0],
			[255,128,128],
			[255,128,0],
			[128,128,0],
			[128,255,0],
			[255,255,0],
			[255,255,128],
			[0,128,0],
			[0,255,0],
			[128,255,128],
			[0,255,128],
			[0,128,128],
			[0,255,255],
			[128,255,255],
			[0,128,255],
			[0,0,128],
			[0,0,255],
			[128,128,255],
			[128,0,128],
			[128,0,255],
			[255,0,255],
			[255,128,255],
			[255,0,128]
		];

		var q = new RgbQuant({
			palette: rgb3level,
			dithKern: "FloydSteinberg",
		});

		window.onload = function() {
			var img = document.getElementById("moo");
			var thing = q.reduce(img);

			var can = document.createElement("canvas");
			can.width = img.naturalWidth;
			can.height = img.naturalHeight;
			var ctx = can.getContext("2d");
			var imgd = ctx.createImageData(can.width,can.height);
			imgd.data.set(thing);
			ctx.putImageData(imgd,0,0);

			document.body.appendChild(can);
		};
	</script>
</head>
<body>
	<img id="moo" src="img/photoman.jpg" alt="">
</body>
</html>